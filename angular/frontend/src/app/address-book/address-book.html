<div>
    <com-header></com-header>
    <div class="clearfix"></div>

    <section class="banner"></section>
    <div class="clearfix"></div>

    <com-topics></com-topics>
    <div class="clearfix"></div>

    <com-search></com-search>
    <div class="clearfix"></div>

    <section class="main-content container mt20">
        <div class="row">
            <com-sidebar></com-sidebar>

            <div class="col-lg-9">
                <h2 class="title-cm"><a ng-href="#/tai-khoan-cua-toi">Tài khoản của tôi</a>&nbsp;&nbsp;>&nbsp;&nbsp;Sổ địa chỉ</h2>
                <div class="address-book mt20">
                    <table class="table">
                        <thead>
                        <tr>
                            <th>Họ tên</th>
                            <th>Địa chỉ 1</th>
                            <th>Địa chỉ 2</th>
                            <th>Số điện thoại</th>
                            <th>Sửa</th>
                            <th>Xóa</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="address in addresses">
                            <td>{{address.last_name + ' ' + address.first_name | trim}}</td>
                            <td>{{address.address_1}}</td>
                            <td>{{address.address_2}}</td>
                            <td>{{address.tel | tel}}</td>
                            <td><a class="glyphicon glyphicon-pencil" ng-click="openAddressModal(address.customer_id, address.id)"></a></td>
                            <td><button class="btn-delete" ng-click="openConfirmModal(address.id)"></button></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="clearfix"></div>
                <button class="btn-blue pull-right" ng-click="openAddressModal(null, null)">Thêm mới</button>

                <!-- add new address modal -->
                <script type="text/ng-template" id="addressModal.html">
                    <div class="modal-header">
                        <button type="button" class="close" ng-click="cancel()">&times;</button>
                        <h4 class="modal-title">{{formTitle}}</h4>
                    </div>
                    <div class="modal-body">
                        <form class="form-horizontal mt20">
                            <div class="form-group">
                                <label class="control-label col-sm-3">Họ đệm :</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" placeholder="Họ đệm" ng-model="address.last_name">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-3">Tên (<span class="text-red">*</span>):</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" placeholder="Tên" ng-model="address.first_name">
                                    <span class="error-msg" ng-show="errors.first_name">{{errors.first_name}}</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-3">Công ty :</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" placeholder="Công ty" ng-model="address.company">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-3">Địa chỉ 1 (<span class="text-red">*</span>):</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" placeholder="Địa chỉ 1" ng-model="address.address_1">
                                    <span class="error-msg" ng-show="errors.address_1">{{errors.address_1}}</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-3">Địa chỉ 2:</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" placeholder="Địa chỉ 2" ng-model="address.address_2">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-3">Số điện thoại (<span class="text-red">*</span>):</label>
                                <div class="col-sm-9">
                                    <input type="tel" class="form-control" placeholder="Số điện thoại" ng-model="address.tel">
                                    <span class="error-msg" ng-show="errors.tel">{{errors.tel}}</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-3" for="city_province">Tỉnh/Thành phố (<span class="text-red">*</span>):</label>
                                <div class="col-sm-9">
                                    <select class="form-control input-sm" id="city_province"
                                            ng-model="address.city_province_id"
                                            ng-options="city_province.id as city_province.name for city_province in cities_provinces">
                                    </select>
                                    <span class="error-msg" ng-show="errors.city_province_id">{{errors.city_province_id}}</span>
                                </div>
                            </div>
                            <input type="hidden" name="id" ng-model="address.id">
                            <input type="hidden" name="customer_id" ng-model="address.customer_id">
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn-yellow" ng-click="store()">{{buttonText}}</button>
                        <button class="btn-delete-cart" ng-click="cancel()"><span class="glyphicon glyphicon-repeat"></span>Quay lại</button>
                    </div>
                </script>

                <!-- confirm address deletion modal -->
                <script type="text/ng-template" id="confirmModal.html">
                    <div class="modal-header">
                        <button type="button" class="close" ng-click="cancel()">&times;</button>
                        <h4 class="modal-title">Xác nhận</h4>
                    </div>
                    <div class="modal-body">
                        <p>Bạn có chắc chắn muốn xóa địa chỉ này khỏi sổ địa chỉ của bạn không?</p>
                    </div>
                    <div class="modal-footer">
                        <button class="btn-yellow" ng-click="delete()">Xóa</button>
                        <button class="btn-delete-cart" ng-click="cancel()"><span class="glyphicon glyphicon-repeat"></span>Quay lại</button>
                    </div>
                </script>
            </div>
        </div>
    </section>
    <div class="clearfix"></div>

    <com-email-registration></com-email-registration>
    <div class="clearfix"></div>

    <com-footer></com-footer>
</div>